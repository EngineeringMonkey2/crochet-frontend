<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <style>
    body {
      margin: 0;
      font-family: 'Helvetica', 'Arial', sans-serif;
      color: #ffffff;
      background-color: #000000;
      overflow-x: hidden;
    }

    /* Toolbar container */
    .toolbarcontain {
      background-color: rgba(0, 0, 0, 0.6);
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 25px 20px;
      box-sizing: border-box;
      transition: top 0.3s ease; /* Added for smooth transition */
    }
    
    .toolbar .cart-link {
        position: relative;
    }
    
    #cart-count {
        position: absolute;
        top: 8px;
        right: 8px;
        background-color: red;
        color: white;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        font-size: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        display: none; /* Hidden by default */
    }

    /* New class to hide the toolbar when scrolling down */
    .toolbar-hidden {
        top: -100px;
    }

    /* Toolbar links */
    .toolbar a {
      color: #ffffff;
      text-align: center;
      padding: 15px 20px;
      text-decoration: none;
      font-size: 20px;
      transition: transform 0.3s ease, color 0.3s ease;
    }

    .hovertext a:hover {
      color: #cccccc;
      transform: scale(1.1);
    }

    .hoverbackground a:hover {
      transform: scale(1.1);
    }

    .leftali, .rightali {
      display: flex;
      align-items: center;
    }

    /* Front section */
    .front {
      height: 100vh;
      width: 100%;
      background-image: url('images/shoppaage.png');
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      text-align: center;
      position: relative;
      overflow: hidden;

    }

    /* Padding1 */
    .shoppadding {
      padding-top: 70px;
      position: relative; /* Ensure title appears above the character */
      z-index: 1;
    }




    .front h1 {
      font-size: 48px;
      font-weight: bold;
      margin: 0;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    /* Shop section */
    .shop {
      background: linear-gradient(to bottom, #f2e5d9, #d4a5a5);
	  color: black;
      padding: 23px 20px;
      width: 100%;
      box-sizing: border-box;
    }





    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 30px;
      max-width: 1500px;
      margin: 0 auto;
    }

    .product-card {
      background-color: white;
      border-radius: 10px;
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
    }




    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
	  color: #82569c;
    }

    .product-card img {
      width: 100%;
      height: 300px;
      object-fit: cover;
    }

    .product-info {
      padding: 15px;
      text-align: center;
    }

    .product-info h3 {
      margin: 10px 0;
      font-size: 18px;
      font-weight: bold;
    }

    .product-info p {
      margin: 5px 0;
      font-size: 16px;
      color: black;
    }

    /* This container acts as the "canvas" for our character. */
    #character-container {
        position: absolute;
        top: 50%;
        left: 50%;
        /* The width and height are the base for positioning the child elements. */
        /* The actual size is now controlled by a 'transform: scale()' property set by JavaScript. */
        width: 600px;
        height: 900px;
        cursor: pointer;
	    user-select: none; /* Prevent text selection */
    }

    /* Common style for all image parts of the character. */
    /* 'position: absolute' allows us to place them anywhere inside the */
    /* 'character-container' using top, left, right, bottom properties. */
    .character-part {
        position: absolute;
        transition: transform 0.5s ease-in-out; /* Smooth transitions for parts */
		outline: none;
    }

    /* --- POSITIONING RULES --- */
    /* 'z-index' controls the stacking order. Higher numbers are on top. */

    #head {
        top: -40px;
        left: 50px;
        z-index: 10; /* The head is on top of the body and ears. */
    }

    #left-ear {
        top: 100px;
        left: -70px;
        transform: rotate(18deg);
        z-index: 5; /* The ear is behind the head. */
    }

    #right-ear {
        top: 100px;
        left: 515px;
        transform: rotate(-18deg);
        z-index: 5; /* The ear is behind the head. */
    }
    
    /* Animate ears on hover for more life */
    #character-container:hover #left-ear {
        transform: rotate(10deg) translateY(-10px);
    }
    #character-container:hover #right-ear {
        transform: rotate(-10deg) translateY(-10px);
    }


    #body {
        top: 520px;
        left: 150px;
        z-index: 9; /* Behind the head, but in front of arms/legs */
    }

    #left-arm {
        top: 500px;
        left: -145px;
        z-index: 8; /* Behind the body */
    }

    #right-arm {
        top: 500px;
        left: 442px;
        z-index: 8; /* Behind the body */
    }

    #legs {
        top: 800px;
        left: 115px;
        z-index: 8; /* Behind the body */
    }
    
    #tail {
        top: 750px;
        left: 440px;
        z-index: 6; /* Behind the body, same level as legs/arms */
    }


    /* --- Eye Styles --- */
    .eye {
        position: absolute;
        width: 100px;
        height: 80px;
        background: white;
        border-top: 30px solid white; 
        border-radius: 50px 50px 50px 50px;
        z-index: 16;
        animation: blink 5s infinite;
    }

    #left-eye {
        top: 220px;
        left: 150px;
    }

    #right-eye {
        top: 220px;
        left: 380px;
    }

    .pupil {
        position: absolute;
        width: 90px;
        height: 90px;
        background: black;
        border-radius: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        animation: look-around 7s ease-in-out infinite;
    }
	
	
    .pupilwhiteleft {
        position: absolute;
        width: 20px;
        height: 20px;
        background: white;
        border-radius: 50%;
        left: 30%;
		top: -30%;
        transform: translate(-50%, -50%);
        animation: look-around 7s ease-in-out infinite;
    }
			
    .pupilwhiteright {
        position: absolute;
        width: 20px;
        height: 20px;
        background: white;
        border-radius: 50%;
        left: 30%;
		top: -30%;
        transform: translate(-50%, -50%);
        animation: look-around 7s ease-in-out infinite;
    }
					
	
    
    @keyframes look-around {
        0% { transform: translate(-50%, -50%) translateX(-20px) translateY(10px); }
        15%, 35% { transform: translate(-50%, -50%) translateX(-20px) translateY(10px); }
        40% { transform: translate(-50%, -50%) translateX(10px) translateY(15px); }
        50%, 70% { transform: translate(-50%, -50%) translateX(10px) translateY(15px); }
        75% { transform: translate(-50%, -50%) translateX(-10px) translateY(13px); }
        80%, 100% { transform: translate(-50%, -50%) translateX(-10px) translateY(13px); }
    }

    @keyframes blink {
        0%, 10%, 15%, 100% { transform: scaleY(1); } /* Open */
        12% { transform: scaleY(0.1); } /* Closed */
    }

    /* --- MOUTH STYLES --- */
    #mouth {
        position: absolute;
        z-index: 15; /* Above the head image but below eyes */
        
        /* Unhappy state (frown) */
        width: 110px;
        height: 40px;
        border: 12px solid black;
        border-color: transparent transparent black transparent; /* Bottom border makes the arc */
        border-radius: 0 0 120px 120px / 0 0 60px 60px; /* Creates the frown shape */
        top: 400px; /* Position below the eyes */
        left: 52%;
        transform: translateX(-50%);
        
        /* Smooth transition for all properties */
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    }

    #tongue {
        position: absolute;
        width: 50px;
        height: 35px;
        background: #ff8a8a; /* Cute pink tongue color */
        border: 4px solid #000;
        border-radius: 50% 50% 20px 20px; /* Tongue shape */
        bottom: 8px;
        left: 52%;
        transform: translateX(-50%) scaleY(0); /* Hidden by default */
        transform-origin: bottom;
        transition: transform 0.2s ease-in-out 0.1s; /* Delayed transition */
    }

    /* Hover state (Happy smile) */
    #character-container:hover #mouth {
        width: 140px; /* Wider for a big smile */
        height: 60px; /* Slightly taller */
        background: black; /* Dark inside of mouth */
        border: 5px solid #000; /* Black border */
        border-radius: 0 0 120px 120px / 0 0 90px 90px; /* Downward curve for upward smile */
        top: 400px; /* Move mouth up slightly */
        left: 52%;
        transition: transform 0.4s ease-in-out 0.3s; /* Delayed transition */
    }

    #character-container:hover #tongue {
        transform: translateX(-50%) scaleY(1); /* Reveal tongue */
    }

    /* --- Arrow Button Styles --- */
    .arrow-btn {
        position: absolute;
        z-index: 20; /* Make sure arrows are on top */
        width: 50px;
        height: 50px;
        background-color: rgba(255, 255, 255, 0.5);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease;
        border: 2px solid rgba(0,0,0,0.2);
    }

    .arrow-btn:hover {
        background-color: rgba(255, 255, 255, 0.9);
        transform: scale(1.1);
    }
    
    .arrow-btn:active {
        transform: scale(1.0); /* Click effect */
    }
    
    /* Head arrows positioning */
    #prev-head {
        left: 0px; 
        top: 380px; 
    }

    #next-head {
        right: -15px; 
        top: 380px;
    }
    
    /* NEW: Ear arrows positioning */
    #prev-ears {
        left: -110px;
        top: 120px;
    }
    
    #next-ears {
        right: -130px;
        top: 120px;
    }

    /* NEW: Body arrows positioning */
    #prev-body {
        left: 100px;
        top: 650px;
    }
    
    #next-body {
        right: 75px;
        top: 650px;
    }

    /* NEW: Arm arrows positioning */
    #prev-arms {
        left: -200px;
        top: 520px;
    }
    
    #next-arms {
        right: -225px;
        top: 520px;
    }

    /* NEW: Leg arrows positioning */
    #prev-legs {
        left: 50px;
        top: 850px;
    }

    #next-legs {
        right: 50px;
        top: 850px;
    }

    /* NEW: Tail arrows positioning */
    #prev-tail {
        left: 475px;
        top: 730px;
    }
    
    #next-tail {
        right: -30px;
        top: 730px;
    }
    
    /* Responsive design */
    @media (max-width: 800px) {
      .front h1 {
	    padding: 25px;
        font-size: 42px;
      }

      .toolbar a {
        font-size: 15px;
        padding: 10px 5px;
		
      }

      .product-grid {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 30px;
      }

      .product-card img {
        height: 320px;
      }
      
      /* The #character-container is now scaled by JavaScript, so we no longer need a media query for it. */
    }

    /* --- START: ANIME BUTTON STYLES --- */

    /* The Button Container - Positioned Absolute */
    .order-button-container {
        position: absolute; /* Changed from fixed to absolute */
        bottom: 50px;
        right: 30px;
        z-index: 25; /* z-index to be on top of other elements in the container */
    }

    /* The Button */
    .order-button {
        padding: 18px 10px;
        font-size: 28px;
        letter-spacing: 2px;
        color: #000000;
        background: #f5f5dc;
        border: 3px solid #5d4037;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2), inset 0 0 8px rgba(0,0,0,0.1);
        cursor: pointer;
        position: relative;
        overflow: visible; /* Allow particles to go outside */
        transition: all 0.3s ease;
        text-transform: uppercase;
        font-family: 'Fredoka One', cursive; 
        font-weight: bold;
    }

    /* Hover Effect */
    .order-button:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 10px 20px rgba(0,0,0,0.3), inset 0 0 10px rgba(0,0,0,0.1);
    }

    /* Active (Click) Effect */
    .order-button:active {
        transform: translateY(2px) scale(0.95);
    }

    /* Container for all effects */
    .effects-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
    }

    /* Individual Particle Styling */
    .particle {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 8px;
        height: 8px;
        background-color: #ffc107;
        border-radius: 50%;
        opacity: 0;
    }
	
	
	
		
		
	/* --- START: Footer Section Styles --- */
	.footer-section {
	  background-color: #ffffff;
	  color: #333;
	  padding: 40px 20px;
	  text-align: center;
	}

	.footer-container {
	  max-width: 1200px;
	  margin: 0 auto;
	  display: flex;
	  justify-content: center;
	  gap: 30px;
	  flex-wrap: wrap;
	}

	.footer-container a {
	  color: #333;
	  text-decoration: none;
	  font-size: 16px;
	  transition: color 0.3s ease;
	}

	.footer-container a:hover {
	  color: #000000;
	  text-decoration: underline;
	}
	/* --- END: Footer Section Styles --- */		
	
		

    /* --- END: ANIME BUTTON STYLES --- */

  </style>
	<link rel="icon" type="image/png" href="images/tabphoto.png">
  <!-- Font for Anime Button -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
</head>
<body>
  <div class="toolbarcontain">
    <div class="hovertext">
      <div class="leftali">
        <div class="toolbar">
          <a href="index.html">Home</a>
          <a href="#shop">Shop</a>
          <a href="#Build Your Monkey">Build</a>
          <a href="contact.html">Contact</a>
        </div>
      </div>
    </div>
    <div class="rightali">
      <div class="hoverbackground">
        <div class="toolbar">
		
		
			<a href="login.html" class="user-link">
				<img src="images/Icons/User.png" alt="User" style="height:20px; vertical-align:middle;">
			</a>		
				
		
		
          <a href="cart.html" class="cart-link">
            <img src="images/Icons/ShoppingBag.png" alt="Shopping Bag" style="height:20px; vertical-align:middle;">
            <span id="cart-count">0</span>
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="front" id="Build Your Monkey" >
	<div class="shoppadding">
		<h1>Build Your Monkey</h1>
	</div>
	    
    <div id="character-container">
        
        <div id="prev-head" class="arrow-btn">
            <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
        </div>
        <div id="next-head" class="arrow-btn">
            <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
        </div>
        
        <div id="prev-ears" class="arrow-btn">
            <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
        </div>
        <div id="next-ears" class="arrow-btn">
            <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
        </div>

        <div id="prev-body" class="arrow-btn">
            <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
        </div>
        <div id="next-body" class="arrow-btn">
            <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
        </div>

        <div id="prev-arms" class="arrow-btn">
            <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
        </div>
        <div id="next-arms" class="arrow-btn">
            <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
        </div>

        <div id="prev-legs" class="arrow-btn">
            <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
        </div>
        <div id="next-legs" class="arrow-btn">
            <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
        </div>
        
        <div id="prev-tail" class="arrow-btn">
            <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
        </div>
        <div id="next-tail" class="arrow-btn">
            <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
        </div>

        <img id="head" class="character-part" src="" alt="Character Head">
        <img id="left-ear" class="character-part" src="" alt="Left Ear">
        <img id="right-ear" class="character-part" src="" alt="Right Ear">
        <img id="body" class="character-part" src="" alt="Character Body">
        <img id="left-arm" class="character-part" src="" alt="Left Arm">
        <img id="right-arm" class="character-part" src="" alt="Right Arm">
        <img id="legs" class="character-part" src="" alt="Legs">
        <img id="tail" class="character-part" src="" alt="Tail">

        <div id="left-eye" class="eye">
            <div class="pupil"></div>
            <div class="pupilwhiteleft"></div>
        </div>
        <div id="right-eye" class="eye">
            <div class="pupil"></div>
            <div class="pupilwhiteright"></div>
        </div>
        
        <div id="mouth">
            <div id="tongue"></div>
        </div>
    </div>
    
    <!-- START: ANIME BUTTON HTML -->
    <div class="order-button-container" id="buttonContainer">
        <button class="order-button" id="orderButton">
            Order Now!
            <div class="effects-container" id="effectsContainer"></div>
        </button>
    </div>
    <!-- END: ANIME BUTTON HTML -->

  </div>

  <div class="shop" id="shop">
    <h1>Products</h1>
    <div class="product-grid" id="product-grid">
      </div>
  </div>
  
  
  <div class="footer-section">
      <div class="footer-container">
	    <a href="aboutus.html">About Us</a>

        <a href="privacypolicy.html">Privacy Policy</a>
        <a href="contact.html">Contact Information</a>
        <a href="returnpolicy.html">Refund Policy</a>
        <a href="shippingpolicy.html">Shipping Policy</a>
		
      </div>
  </div>

  
  <script src="cart.js"></script>
  <script src="products.js"></script>
  <script>
    // Function to render products
    function renderProducts() {
      const productGrid = document.getElementById('product-grid');
      productGrid.innerHTML = '';
      products.forEach(product => {
        const productCard = document.createElement('div');
        productCard.classList.add('product-card');
        
        const imageUrl = product.image || (product.images && product.images[0]);

        productCard.innerHTML = `
          <img src="${imageUrl}" alt="${product.name}">
          <div class="product-info">
            <h3>${product.name}</h3>
            <p>${product.price}</p>
          </div>
        `;
        
        productCard.addEventListener('click', () => {
          window.location.href = `product.html?productId=${product.id}`;
        });
        productGrid.appendChild(productCard);
      });
    }

    // --- Combined Scroll Logic ---
    let lastScrollTop = 0;
    const toolbar = document.querySelector('.toolbarcontain');

    window.addEventListener('scroll', function() {
      // Original animation on scroll for product cards
      const shopSection = document.querySelector('.shop');
      const productCards = document.querySelectorAll('.product-card');
      const sectionTop = shopSection.getBoundingClientRect().top;
      const windowHeight = window.innerHeight;

      if (sectionTop < windowHeight * 0.75) {
        productCards.forEach((card, index) => {
          setTimeout(() => {
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
          }, index * 100);
        });
      }

      // --- New logic for toolbar visibility ---
      let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      if (scrollTop > lastScrollTop) {
          // Downscroll code
          toolbar.classList.add('toolbar-hidden');
      } else {
          // Upscroll code
          toolbar.classList.remove('toolbar-hidden');
      }
      lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
    });
	
	// Wait for the document to be fully loaded before running the script
    document.addEventListener('DOMContentLoaded', () => {
        
        renderProducts();

        // --- NEW: Monkey Auto-Scaling Logic ---
        const characterContainer = document.getElementById('character-container');
        characterContainer.style.transition = 'transform 0.3s ease'; // Apply transition for smooth scaling
        let baseScale = 1; // This will hold the current scale based on window size
				
		// This is a new helper function that calculates the multiplier with a decay effect.
		function getDynamicMultiplier(currentSize, minSize, maxSize, maxMultiplier, minMultiplier) {
			// If the screen is smaller than our minimum, use the largest multiplier.
			if (currentSize <= minSize) {
				return maxMultiplier;
			}
			// If the screen is larger than our maximum, use the smallest multiplier.
			if (currentSize >= maxSize) {
				return minMultiplier;
			}

			// Calculate how far we are between the min and max screen sizes (a value from 0.0 to 1.0).
			const progress = (currentSize - minSize) / (maxSize - minSize);

			// Apply a non-linear decay curve. Math.pow(progress, 2) makes the size change more naturally.
			const easedProgress = Math.pow(progress, 2);

			// Calculate the final multiplier by interpolating between the max and min values.
			return maxMultiplier - (easedProgress * (maxMultiplier - minMultiplier));
		}


		// Replace your old updateMonkeyScale function with this new one.
		function updateMonkeyScale() {
			// --- Configuration for Dynamic Scaling ---
			// You can adjust these values to change the scaling behavior.

			// Screen size boundaries
			const MIN_SCREEN_WIDTH = 320;  // Smallest mobile screen width to consider
			const MAX_SCREEN_WIDTH = 1920; // Large desktop screen width
			const MIN_SCREEN_HEIGHT = 480; // Smallest mobile screen height
			const MAX_SCREEN_HEIGHT = 1080; // Standard desktop screen height

			// Multiplier boundaries (the % of the screen the monkey should occupy)
			const MAX_WIDTH_MULTIPLIER = 0.5; // Use 85% of width on the SMALLEST screens
			const MIN_WIDTH_MULTIPLIER = 0.40; // Use 40% of width on the LARGEST screens
			const MAX_HEIGHT_MULTIPLIER = 0.80; // Use 80% of height on the SMALLEST screens
			const MIN_HEIGHT_MULTIPLIER = 0.65; // Use 65% of height on the LARGEST screens

			// --- End of Configuration ---


			// Get the dynamic multipliers for the current screen size.
			const widthMultiplier = getDynamicMultiplier(window.innerWidth, MIN_SCREEN_WIDTH, MAX_SCREEN_WIDTH, MAX_WIDTH_MULTIPLIER, MIN_WIDTH_MULTIPLIER);
			const heightMultiplier = getDynamicMultiplier(window.innerHeight, MIN_SCREEN_HEIGHT, MAX_SCREEN_HEIGHT, MAX_HEIGHT_MULTIPLIER, MIN_HEIGHT_MULTIPLIER);

			// Calculate target dimensions using the new dynamic multipliers.
			const targetWidth = window.innerWidth * widthMultiplier;
			const targetHeight = window.innerHeight * heightMultiplier;

			// The rest of this logic remains the same.
			let scaleBasedOnHeight = targetHeight / 900;
			let scaleBasedOnWidth = targetWidth / 600;

			baseScale = Math.min(scaleBasedOnHeight, scaleBasedOnWidth);
			characterContainer.style.transform = `translate(-50%, -50%) scale(${baseScale})`;
		}




















        // Add event listeners for hover effects
        characterContainer.addEventListener('mouseenter', () => {
            const hoverScale = baseScale * 1.03; // Make it slightly bigger on hover
            characterContainer.style.transform = `translate(-50%, -50%) scale(${hoverScale})`;
        });

        characterContainer.addEventListener('mouseleave', () => {
            // Revert to the base scale when the mouse leaves
            characterContainer.style.transform = `translate(-50%, -50%) scale(${baseScale})`;
        });

        // Add an event listener to rescale the monkey whenever the window is resized
        window.addEventListener('resize', updateMonkeyScale);

        // Call the function once on page load to set the initial size
        updateMonkeyScale();


        // --- Character Head Changer ---
        const headImage = document.getElementById('head');
        const prevHeadButton = document.getElementById('prev-head');
        const nextHeadButton = document.getElementById('next-head');
        const headImages = [
            'images/Anime/BuildingTemplate/01-Head/Heads/Head1.png',
            'images/Anime/BuildingTemplate/01-Head/Heads/Head2.png',
			'images/Anime/BuildingTemplate/01-Head/Heads/Head3.png',
            'images/Anime/BuildingTemplate/01-Head/Heads/Head4.png',
			'images/Anime/BuildingTemplate/01-Head/Heads/Head5.png'
        ];
        let currentHeadIndex = 0;
        function updateHead() {
            headImage.src = headImages[currentHeadIndex];
        }

        // --- Character Ear Changer ---
        const leftEarImage = document.getElementById('left-ear');
        const rightEarImage = document.getElementById('right-ear');
        const prevEarsButton = document.getElementById('prev-ears');
        const nextEarsButton = document.getElementById('next-ears');
        const earImages = [
            { left: 'images/Anime/BuildingTemplate/04-Ears/Ears/LeftEar1.png', right: 'images/Anime/BuildingTemplate/04-Ears/Ears/RightEar1.png' },
            { left: 'images/Anime/BuildingTemplate/04-Ears/Ears/LeftEar2.png', right: 'images/Anime/BuildingTemplate/04-Ears/Ears/RightEar2.png' },
            { left: 'images/Anime/BuildingTemplate/04-Ears/Ears/LeftEar3.png', right: 'images/Anime/BuildingTemplate/04-Ears/Ears/RightEar3.png' },
            { left: 'images/Anime/BuildingTemplate/04-Ears/Ears/LeftEar4.png', right: 'images/Anime/BuildingTemplate/04-Ears/Ears/RightEar4.png' },
            { left: 'images/Anime/BuildingTemplate/04-Ears/Ears/LeftEar5.png', right: 'images/Anime/BuildingTemplate/04-Ears/Ears/RightEar5.png' }
        ];
        let currentEarIndex = 0;
        function updateEars() {
            const earPair = earImages[currentEarIndex];
            leftEarImage.src = earPair.left;
            rightEarImage.src = earPair.right;
        }

        // --- Character Body Changer ---
        const bodyImage = document.getElementById('body');
        const prevBodyButton = document.getElementById('prev-body');
        const nextBodyButton = document.getElementById('next-body');
        const bodyImages = [
            'images/Anime/BuildingTemplate/05-Body/Bodies/Body1.png',
            'images/Anime/BuildingTemplate/05-Body/Bodies/Body2.png',
            'images/Anime/BuildingTemplate/05-Body/Bodies/Body3.png',
            'images/Anime/BuildingTemplate/05-Body/Bodies/Body4.png',
            'images/Anime/BuildingTemplate/05-Body/Bodies/Body5.png'
        ];
        let currentBodyIndex = 0;
        function updateBody() {
            bodyImage.src = bodyImages[currentBodyIndex];
        }

        // --- Character Arm Changer ---
        const leftArmImage = document.getElementById('left-arm');
        const rightArmImage = document.getElementById('right-arm');
        const prevArmsButton = document.getElementById('prev-arms');
        const nextArmsButton = document.getElementById('next-arms');
        const armImages = [
            { left: 'images/Anime/BuildingTemplate/06-Arms/Arms/LeftArm1.png', right: 'images/Anime/BuildingTemplate/06-Arms/Arms/RightArm1.png' },
            { left: 'images/Anime/BuildingTemplate/06-Arms/Arms/LeftArm2.png', right: 'images/Anime/BuildingTemplate/06-Arms/Arms/RightArm2.png' },
            { left: 'images/Anime/BuildingTemplate/06-Arms/Arms/LeftArm3.png', right: 'images/Anime/BuildingTemplate/06-Arms/Arms/RightArm3.png' },
            { left: 'images/Anime/BuildingTemplate/06-Arms/Arms/LeftArm4.png', right: 'images/Anime/BuildingTemplate/06-Arms/Arms/RightArm4.png' },
            { left: 'images/Anime/BuildingTemplate/06-Arms/Arms/LeftArm5.png', right: 'images/Anime/BuildingTemplate/06-Arms/Arms/RightArm5.png' }
        ];
        let currentArmIndex = 0;
        function updateArms() {
            const armPair = armImages[currentArmIndex];
            leftArmImage.src = armPair.left;
            rightArmImage.src = armPair.right;
        }

        // --- Character Leg Changer ---
        const legsImage = document.getElementById('legs');
        const prevLegsButton = document.getElementById('prev-legs');
        const nextLegsButton = document.getElementById('next-legs');
        const legImages = [
            'images/Anime/BuildingTemplate/07-Legs/Legs/Legs1.png',
            'images/Anime/BuildingTemplate/07-Legs/Legs/Legs2.png',
            'images/Anime/BuildingTemplate/07-Legs/Legs/Legs3.png',
            'images/Anime/BuildingTemplate/07-Legs/Legs/Legs4.png',
            'images/Anime/BuildingTemplate/07-Legs/Legs/Legs5.png'
        ];
        let currentLegIndex = 0;
        function updateLegs() {
            legsImage.src = legImages[currentLegIndex];
        }

        // --- Character Tail Changer ---
        const tailImage = document.getElementById('tail');
        const prevTailButton = document.getElementById('prev-tail');
        const nextTailButton = document.getElementById('next-tail');
        const tailImages = [
            'images/Anime/BuildingTemplate/08-Tail/Tails/Tail1.png',
            'images/Anime/BuildingTemplate/08-Tail/Tails/Tail2.png',
            'images/Anime/BuildingTemplate/08-Tail/Tails/Tail3.png',
            'images/Anime/BuildingTemplate/08-Tail/Tails/Tail4.png',
            'images/Anime/BuildingTemplate/08-Tail/Tails/Tail5.png',
            'images/Anime/BuildingTemplate/08-Tail/Tails/Tail6.png',
            'images/Anime/BuildingTemplate/08-Tail/Tails/Tail7.png'
        ];
        let currentTailIndex = 0;
        function updateTail() {
            tailImage.src = tailImages[currentTailIndex];
        }


        // --- Event Listeners ---
        nextHeadButton.addEventListener('click', (event) => {
            event.stopPropagation();
            currentHeadIndex = (currentHeadIndex + 1) % headImages.length;
            updateHead();
        });
        prevHeadButton.addEventListener('click', (event) => {
            event.stopPropagation();
            currentHeadIndex = (currentHeadIndex - 1 + headImages.length) % headImages.length;
            updateHead();
        });
        
        nextEarsButton.addEventListener('click', (event) => {
            event.stopPropagation();
            currentEarIndex = (currentEarIndex + 1) % earImages.length;
            updateEars();
        });
        prevEarsButton.addEventListener('click', (event) => {
            event.stopPropagation();
            currentEarIndex = (currentEarIndex - 1 + earImages.length) % earImages.length;
            updateEars();
        });

        nextBodyButton.addEventListener('click', (event) => {
            event.stopPropagation();
            currentBodyIndex = (currentBodyIndex + 1) % bodyImages.length;
            updateBody();
        });
        prevBodyButton.addEventListener('click', (event) => {
            event.stopPropagation();
            currentBodyIndex = (currentBodyIndex - 1 + bodyImages.length) % bodyImages.length;
            updateBody();
        });

        nextArmsButton.addEventListener('click', (event) => {
            event.stopPropagation();
            currentArmIndex = (currentArmIndex + 1) % armImages.length;
            updateArms();
        });
        prevArmsButton.addEventListener('click', (event) => {
            event.stopPropagation();
            currentArmIndex = (currentArmIndex - 1 + armImages.length) % armImages.length;
            updateArms();
        });

        nextLegsButton.addEventListener('click', (event) => {
            event.stopPropagation();
            currentLegIndex = (currentLegIndex + 1) % legImages.length;
            updateLegs();
        });
        prevLegsButton.addEventListener('click', (event) => {
            event.stopPropagation();
            currentLegIndex = (currentLegIndex - 1 + legImages.length) % legImages.length;
            updateLegs();
        });

        nextTailButton.addEventListener('click', (event) => {
            event.stopPropagation();
            currentTailIndex = (currentTailIndex + 1) % tailImages.length;
            updateTail();
        });
        prevTailButton.addEventListener('click', (event) => {
            event.stopPropagation();
            currentTailIndex = (currentTailIndex - 1 + tailImages.length) % tailImages.length;
            updateTail();
        });
        
        // --- Initial Setup ---
        updateHead();
        updateEars();
        updateBody();
        updateArms();
        updateLegs();
        updateTail();

        // --- START: ANIME BUTTON SCRIPT ---
        const orderButton = document.getElementById('orderButton');
        const effectsContainer = document.getElementById('effectsContainer');

        orderButton.addEventListener('click', (e) => {
            // --- MODIFICATION START ---
            // This is the new logic to open the customization page.
            
            // 1. Define the parts we need to get the source for.
            const partsToSave = [
                'head', 'left-ear', 'right-ear', 'body',
                'left-arm', 'right-arm', 'legs', 'tail'
            ];

            // 2. Create a new URLSearchParams object to build our query string.
            const params = new URLSearchParams();

            // 3. Loop through the parts, get their image src, and add to the params.
            partsToSave.forEach(partId => {
                const imageElement = document.getElementById(partId);
                if (imageElement) {
                    // encodeURIComponent makes the URL safe to use in a query string.
                    params.append(partId, encodeURIComponent(imageElement.src));
                }
            });

            // 4. Redirect to the new page with the parameters.
            window.location.href = `customizationproduct.html?${params.toString()}`;

            // --- MODIFICATION END ---
        });
        // --- END: ANIME BUTTON SCRIPT ---

    });
  </script>
</body>
</html>
